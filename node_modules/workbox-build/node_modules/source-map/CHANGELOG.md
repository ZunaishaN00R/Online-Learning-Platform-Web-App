# Change Log

## 0.8.0-beta.0

### Breaking changes

* [#350](https://github.com/mozilla/source-map/pull/350) -
  Change browser detection logic for WASM loading.
* [#363](https://github.com/mozilla/source-map/pull/363) -
  Change WASM loading detection to rely on `package.json#browser` field.
* [#362](https://github.com/mozilla/source-map/pull/362) -
  Remove the `dist/` bundle.
* [#371](https://github.com/mozilla/source-map/pull/371) -
  Reimplement sourcemap URL processing using the WHATWG URL API.

### Nonbreaking changes:

* [#339](https://github.com/mozilla/source-map/pull/339) -
  Allow initializing the consumer `mappings.wasm` file as an `ArrayBuffer`.

### Internal Improvements:

* [#347](https://github.com/mozilla/source-map/pull/347) -
  Improve tests.
* [#352](https://github.com/mozilla/source-map/pull/352) -
  Improve documentation.
* [#361](https://github.com/mozilla/source-map/pull/361) -
  Use newer Webpack CLI when bundling.
* [#364](https://github.com/mozilla/source-map/pull/364) -
  Convert `IndexedSourceMapConsumer` implementation to pass more through
    to `BasicSourceMapConsumer`.
* [#366](https://github.com/mozilla/source-map/pull/366) -
  Normalize internal URL representation to be easier to follow.
* [#341](https://github.com/mozilla/source-map/pull/341) -
  Use async functions to simplify `SourceMapConsumer.with` implementation.


## 0.7.3

* Fix a bug where nested uses of `SourceMapConsumer` could result in a
  `TypeError`. [#338](https://github.com/mozilla/source-map/issues/338)
  [#330](https://github.com/mozilla/source-map/issues/330)
  [#319](https://github.com/mozilla/source-map/issues/319)

## 0.7.2

* Another 3x speed up in `SourceMapConsumer`. Read about it here:
  http://fitzgeraldnick.com/2018/02/26/speed-without-wizardry.html

## 0.7.1

* Updated TypeScript typings. [#321][]

[#321]: https://github.com/mozilla/source-map/pull/321

## 0.7.0

* `SourceMapConsumer` now uses WebAssembly, and is **much** faster! Read about
  it here:
  https://hacks.mozilla.org/2018/01/oxidizing-source-maps-with-rust-and-webassembly/

* **Breaking change:** `new SourceMapConsumer` now returns a `Promise` object
  that resolves to the newly constructed `SourceMapConsumer` instance, rather
  than returning the new instance immediately.

* **Breaking change:** when you're done using a `SourceMapConsumer` instance,
  you must call `SourceMapConsumer.prototype.destroy` on it. After calling
  `destroy`, you must not use the instance again.

* **Breaking change:** `SourceMapConsumer` used to be able to handle lines,
  columns numbers and source and name indices up to `2^53 - 1` (aka
  `Number.MAX_SAFE_INTEGER`). It can now only handle them up to `2^32 - 1`.

* **Breaking change:** The `source-map` library now uses modern ECMAScript-isms:
  `let`, arrow functions, `async`, etc. Use Babel to compile it down to
  ECMAScript 5 if you need to support older JavaScript environments.

* **Breaking change:** Drop support for Node < 8. If you want to support older
versions of node, please use v0.6 or below.

## 0.5.6

* Fix for regression when people were using numbers as names in source maps. See
  #236.

## 0.5.5

* Fix "regression" of unsupported, implementation behavior that half the world
  happens to have come to depend on. See #235.

* Fix regression involving function hoisting in SpiderMonkey. See #233.

## 0.5.4

* Large performance improvements to source-map serialization. See #228 and #229.

## 0.5.3

* Do not include unnecessary distribution files. See
  commit ef7006f8d1647e0a83fdc60f04f5a7ca54886f86.

## 0.5.2

* Include browser distributions of the library in package.json's `files`. See
  issue #212.

## 0.5.1

* Fix latent bugs in IndexedSourceMapConsumer.prototype._parseMappings. See
  ff05274becc9e6e1295ed60f3ea090d31d843379.

## 0.5.0

* Node 0.8 is no longer supported.

* Use webpack instead of dryice for bundling.

* Big speedups serializing source maps. See pull request #203.

* Fix a bug with `SourceMapConsumer.prototype.sourceContentFor` and sources that
  explicitly start with the source root. See issue #199.

## 0.4.4

* Fix an issue where using a `SourceMapGenerator` after having created a
  `SourceMapConsumer` from it via `SourceMapConsumer.fromSourceMap` failed. See
  issue #191.

* Fix an issue with where `SourceMapGenerator` would mistakenly consider
  different mappings as duplicates of each other and avoid generating them. See
  issue #192.

## 0.4.3

* A very large number of performance improvements, particularly when parsing
  source maps. Collectively about 75% of time shaved off of the source map
  parsing benchmark!

* Fix a bug in `SourceMapConsumer.prototype.all